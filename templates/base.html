<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}AgriGenius 360°{% endblock %}</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Animate.css for animations -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animated-backgrounds.css') }}">
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Global Particle System -->
    <div class="particles-container global-particles">
        <!-- Sky particles -->
        {% for i in range(20) %}
        <div class="particle sky-particle"></div>
        {% endfor %}
        
        <!-- Ground particles -->
        {% for i in range(14) %}
        <div class="particle ground-particle"></div>
        {% endfor %}
        
        <!-- Floating particles -->
        {% for i in range(16) %}
        <div class="particle floating-particle"></div>
        {% endfor %}
    </div>

    <!-- Animated GIF Background -->
    <div class="farm-field-bg">
        <div class="clouds-animation"></div>
        <div class="stars-animation"></div>
        <div class="wheat-animation"></div>
        <div class="butterflies-animation"></div>
        <div class="tractor-animation"></div>
        <div class="rain-animation"></div>
        
        <!-- Page-specific animations -->
        {% if request.path == '/crop' %}
        <div class="crop-bg-animation"></div>
        {% elif request.path == '/fertilizer' %}
        <div class="fertilizer-bg-animation"></div>
        {% elif request.path == '/weather_forecast' %}
        <div class="weather-bg-animation"></div>
        {% elif request.path == '/crop_prices' %}
        <div class="price-bg-animation"></div>
        {% endif %}
    </div>

    <header>
        <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container">
                <a class="navbar-brand" href="/">
                    <i class="fas fa-seedling brand-icon"></i> 
                    <span class="brand-text">AgriGenius 360°</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
                        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="/">
                                <i class="fas fa-home nav-icon"></i> Home
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/crop">
                                <i class="fas fa-seedling nav-icon"></i> Crop
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/fertilizer">
                                <i class="fas fa-flask nav-icon"></i> Fertilizer
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/solar">
                                <i class="fas fa-sun nav-icon"></i> Solar
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/crop_prices">
                                <i class="fas fa-rupee-sign nav-icon"></i> Prices
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/weather_forecast">
                                <i class="fas fa-cloud-sun-rain nav-icon"></i> Weather
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/water_management">
                                <i class="fas fa-tint nav-icon"></i> Water
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/plant_disease">
                                <i class="fas fa-leaf nav-icon"></i> Disease
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/gov_schemes">
                                <i class="fas fa-university nav-icon"></i> Schemes
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/chat">
                                <i class="fas fa-comments nav-icon"></i> Chat
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <div class="container mt-4 mb-5">
            {% block content %}{% endblock %}
        </div>
    </main>

    <footer class="mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5><i class="fas fa-leaf me-2 footer-icon"></i>AgriGenius 360°</h5>
                    <p class="footer-text">AI-Driven Farming Optimization & Renewable Energy Management System</p>
                    <div class="footer-icons">
                        <i class="fas fa-tractor me-3"></i>
                        <i class="fas fa-solar-panel me-3"></i>
                        <i class="fas fa-cloud-sun-rain me-3"></i>
                        <i class="fas fa-leaf"></i>
                    </div>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="footer-text">Made by: Mokshit Kaushik</p>
                    <p class="footer-version">Version 1.20</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/weather-animations.js') }}"></script>
    <script src="{{ url_for('static', filename='js/homepage-particles.js') }}"></script>
    <script src="{{ url_for('static', filename='js/global-particles.js') }}"></script>
    
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Create wheat stalks only if wheat-field element exists
        const wheatField = document.querySelector('.wheat-field');
        if (wheatField) {
            for (let i = 0; i < 15; i++) {
                const wheatStalk = document.createElement('div');
                wheatStalk.className = 'wheat-stalk';
                wheatStalk.style.height = (40 + Math.random() * 30) + 'px';
                wheatStalk.style.left = (i * 7) + '%';
                wheatStalk.style.animationDelay = (Math.random() * 2) + 's';
                wheatStalk.style.transform = `rotate(${-5 + Math.random() * 10}deg)`;
                wheatStalk.style.animation = `grassWave ${5 + Math.random() * 5}s infinite ease-in-out ${Math.random() * 2}s`;
                wheatField.appendChild(wheatStalk);
            }
        }
        
        // Create butterflies only if container exists
        const butterfliesContainer = document.querySelector('.butterflies-container');
        if (butterfliesContainer) {
            for (let i = 0; i < 5; i++) {
            const butterfly = document.createElement('div');
            butterfly.className = 'butterfly';
            
            // Random position and size
            const size = 8 + Math.random() * 8;
            butterfly.style.width = `${size}px`;
            butterfly.style.height = `${size}px`;
            
            // Random color (different butterfly types)
            const colorOptions = [
                [78, 205, 196], // Teal
                [255, 177, 66], // Orange
                [255, 107, 107], // Red
                [164, 198, 57], // Green
                [255, 183, 197] // Pink
            ];
            const colorIdx = Math.floor(Math.random() * colorOptions.length);
            const [r, g, b] = colorOptions[colorIdx];
            
            butterfly.style.left = `${Math.random() * 90 + 5}%`;
            butterfly.style.top = `${Math.random() * 60 + 10}%`;
            
            // Apply colors to wings
            butterfly.style.setProperty('--wing-color', `rgb(${r}, ${g}, ${b})`);
            
            // Add movement animation with random path
            butterfly.animate(
                [
                    { transform: 'translate(0, 0)' },
                    { transform: `translate(${-50 + Math.random() * 100}px, ${-30 + Math.random() * 60}px)` },
                    { transform: `translate(${-50 + Math.random() * 100}px, ${-30 + Math.random() * 60}px)` },
                    { transform: 'translate(0, 0)' }
                ],
                {
                    duration: 10000 + Math.random() * 10000,
                    iterations: Infinity
                }
            );
            
            // Apply color to wings
            const before = document.createElement('style');
            before.textContent = `
                .butterfly:nth-child(${i+1})::before, 
                .butterfly:nth-child(${i+1})::after {
                    background-color: rgba(${r}, ${g}, ${b}, 0.7);
                }
            `;
            document.head.appendChild(before);
            
            butterfliesContainer.appendChild(butterfly);
            }
        }
        
        // Add animated entrance for page elements
        const header = document.querySelector('header');
        const main = document.querySelector('main');
        const footer = document.querySelector('footer');
        
        header.classList.add('animate__animated', 'animate__fadeInDown');
        main.classList.add('animate__animated', 'animate__fadeIn');
        footer.classList.add('animate__animated', 'animate__fadeInUp');
        
        // Add hover animation for navbar links
        const navLinks = document.querySelectorAll('.nav-link');
        navLinks.forEach(link => {
            link.addEventListener('mouseenter', function() {
                const icon = this.querySelector('.nav-icon');
                if (icon) {
                    icon.classList.add('animate__animated', 'animate__heartBeat');
                    setTimeout(() => {
                        icon.classList.remove('animate__animated', 'animate__heartBeat');
                    }, 1000);
                }
            });
        });
        
        // Change colors based on time of day
        const hour = new Date().getHours();
        if (hour < 6 || hour > 18) { // Night time
            document.body.classList.add('night-mode');
        } else if (hour < 10) { // Morning
            document.body.classList.add('morning-mode');
        } else if (hour > 16) { // Evening
            document.body.classList.add('evening-mode');
        }
    });
    </script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
